# 紙アンケート OCR 入力効率化 Web アプリ - メイン要件 Issue

## 基本情報

- **作成日**: 2024-11-02
- **担当者**: プロジェクトチーム
- **優先度**: High
- **種別**: Feature

## 問題・要件概要

紙媒体で回収した定型アンケートの結果を、Chrome Book のカメラを用いて OCR 認識し、社内システムへ転記する業務を効率化する Web アプリの開発。

## 詳細説明

### 現状の問題

- 紙アンケートの回答を手動でシステム入力するため、時間とコストがかかる
- 手動入力によるヒューマンエラーが発生しやすい
- 入力作業者の負担が大きく、生産性が低い

### 要求事項

**事前にアンケートの様式（テンプレート）を登録**することで、必要な箇所のみを高速かつ正確にテキスト化し、入力作業の時間短縮とミス削減を実現する。

### システム特徴

- **テンプレートベース OCR**: 空のアンケート様式を事前登録し、抽出領域を GUI 設定
- **カメラダイレクト入力**: PC カメラで直接撮影、シームレスな OCR 処理
- **クライアントサイド完結**: ブラウザ内で全処理、個人情報の外部送信なし
- **柔軟なデータ整形**: 抽出結果の並べ替え・編集機能

## 機能要件

### A. テンプレート管理モード

- **FR-A01**: テンプレート新規作成

  - 未記入アンケート用紙の撮影
  - OCR 対象領域のマウスドラッグ指定
  - 領域名付与と抽出順序定義
  - ローカルストレージへの保存

- **FR-A02**: テンプレート管理
  - 保存済みテンプレートの一覧表示
  - テンプレート選択・削除機能

### B. データ入力モード

- **FR-B01**: アンケート撮影

  - カメラ起動とライブ映像表示
  - テンプレート枠線のオーバーレイ表示
  - 記入済みアンケートの撮影

- **FR-B02**: OCR 一括実行

  - テンプレート定義領域の自動切り出し
  - 全領域の一括 OCR 処理
  - 項目名とテキストペアの順序表示

- **FR-B03**: 結果編集・並べ替え

  - 抽出テキストの自由編集
  - ドラッグ&ドロップによる順序変更

- **FR-B04**: テキスト出力

  - 整形データのクリップボードコピー
  - フォーマット: `[項目名]: [テキスト]\n`

- **FR-B05**: 対話型 OCR 実行（オプション）
  - 領域単位での順次 OCR 処理
  - 1 項目ずつ確認・修正

## 非機能要件

- **パフォーマンス**: A4・10 領域の OCR 処理を 20 秒以内
- **セキュリティ**:
  - テンプレート定義のみローカルストレージ保存
  - アンケート画像・個人情報は永続化しない
- **ユーザビリティ**:
  - 明確なモード区別 UI
  - スムーズなドラッグ操作

## 技術要件

- **対応デバイス**: カメラ利用可能な Chrome Book
- **対応ブラウザ**: Google Chrome 最新版
- **技術スタック**:
  - フロントエンド: React.js + TypeScript
  - OCR エンジン: Tesseract.js
  - データ保存: ブラウザローカルストレージ
  - 開発環境: Bun + Vite

## 受け入れ条件

- [ ] テンプレート作成機能が正常に動作する
- [ ] 記入済みアンケートの OCR 処理が正常に実行される
- [ ] 抽出結果の編集・並べ替えが直感的に操作できる
- [ ] 整形データがクリップボードに正しくコピーされる
- [ ] Chrome Book の Chrome ブラウザで正常に動作する
- [ ] OCR 処理が 20 秒以内に完了する
- [ ] 個人情報がローカルに保存されない
- [ ] テンプレート情報のみがローカルストレージに保存される

## 影響範囲

- **ユーザー**: アンケート入力業務担当者の作業効率大幅向上
- **システム**: 新規 Web アプリとして独立動作
- **他機能**: 既存システムとの連携は今回のスコープ外

## 関連ドキュメント

- Research: `docs/02_research/2024_11/20241102_01_ocr-technology-comparison.md`
- Research: `docs/02_research/2024_11/20241102_02_react-camera-integration.md`
- Plan: `docs/03_plans/overall/20241102_01_project-overall-plan.md`

## 解決状況

- [ ] 要件分析完了
- [ ] 技術調査完了
- [ ] 実装計画完了
- [ ] 実装完了
- [ ] テスト完了
- [ ] レビュー完了
